{% extends 'base.html' %}

{% block content %}
    <a href="/classes/{{gym_class.id}}/edit" class="create_edit_cancel">Edit class details </a>
    <header>
        <h3>Class details</h3>
    </header>

    <p>{{gym_class.class_type}}</p>
    <p>{{gym_class.instructor.name}}</p>
    <p>{{gym_class.date[8:10]}}/{{gym_class.date[5:7]}}/{{gym_class.date[:4]}}</p>
    <p>{{gym_class.time}}</p>
    <p>{{gym_class.duration}}</p>
    <p>{{gym_class.location.name}}</p>
    <p>{{gym_class.location.capacity}}</p>

    <form action="/classes/{{gym_class.id}}/delete" method="POST">
        <input type="submit" value="Delete class">
    </form>

    <form action="/attendances/new" method="POST">
        <input type="hidden" name="class_id" value="{{gym_class.id}}">
        <label for="member">Add member to class: </label>
        <select name="member_id" id="member">
            {% if class_full %}
                <option value="" selected="true" disabled="disabled">Sorry the class is full!</option>
            {% else %}
                <option value="" selected="true" disabled="disabled">Select a member</option>
                {% for member in members %}
                <option value="{{member.id}}">#{{member.id}} - {{member.first_name}} {{member.last_name}}</option>
                {% endfor %}
            {% endif %}
        </select>
        <input type="submit" value="Add">
    </form>

    <header>
        <h3>Members booked in</h3>
    </header>

    {% for attendance in attendees %}
    <a href="/members/{{attendance.member.id}}">
        <p>
            #{{attendance.member.id}} - {{attendance.member.first_name}} {{attendance.member.last_name}}
            <form action="/attendances/{{attendance.id}}/delete" method="POST">
                <input type="hidden" name="return_to" value="classes">
                <input type="submit" value="Remove from class">
            </form>
        </p>
    </a>
    {% endfor %}

{% endblock %}